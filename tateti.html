<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>ğŸ‰ Ta Te Ti Fiestoso</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  font-family:system-ui, sans-serif;
  background:radial-gradient(circle at top,#ff9a9e,#fad0c4,#fbc2eb);
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}

/* ğŸ‰ CONFETTI */
.confetti{
  position:fixed;
  width:8px;
  height:14px;
  background:hsl(var(--h),90%,60%);
  top:-20px;
  left:var(--x);
  animation:fall linear infinite;
  opacity:.8;
  pointer-events:none;
}

@keyframes fall{
  to{transform:translateY(110vh) rotate(360deg)}
}

/* ğŸ† FUEGOS */
.firework{
  position:fixed;
  width:8px;
  height:8px;
  border-radius:50%;
  background:white;
  animation:boom 1s ease-out forwards;
  pointer-events:none;
}

@keyframes boom{
  from{transform:scale(0);opacity:1}
  to{transform:scale(8);opacity:0}
}

/* CARD */
.card{
  background:rgba(0,0,0,.55);
  backdrop-filter:blur(8px);
  border-radius:22px;
  padding:24px;
  color:white;
  width:320px;
  text-align:center;
  box-shadow:0 20px 40px rgba(0,0,0,.4);
}

h1{
  margin:0 0 12px;
}

.menu button,
.cell{
  width:100%;
  padding:14px;
  margin:6px 0;
  border:none;
  border-radius:999px;
  background:linear-gradient(135deg,#38bdf8,#6366f1);
  color:white;
  font-size:18px;
  cursor:pointer;
  transition:.2s;
}

button:hover{
  transform:scale(1.05);
}

.board{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  margin:16px 0;
}

.cell{
  height:80px;
  font-size:38px;
  font-weight:700;
  display:flex;
  align-items:center;
  justify-content:center;
}

.status{
  margin:10px 0;
  font-size:16px;
}

.back{
  margin-top:10px;
  display:block;
  color:#93c5fd;
  text-decoration:none;
}
</style>
</head>

<body>

<script>
// ğŸ‰ CONFETTI
for(let i=0;i<40;i++){
  const c=document.createElement("div");
  c.className="confetti";
  c.style.setProperty("--x",Math.random()*100+"vw");
  c.style.setProperty("--h",Math.random()*360);
  c.style.animationDuration=4+Math.random()*4+"s";
  document.body.appendChild(c);
}

// ğŸ† FUEGOS
setInterval(()=>{
  const f=document.createElement("div");
  f.className="firework";
  f.style.left=Math.random()*100+"vw";
  f.style.top=Math.random()*60+"vh";
  document.body.appendChild(f);
  setTimeout(()=>f.remove(),1000);
},2000);
</script>

<div class="card" id="menu">
  <h1>ğŸ‰ Ta Te Ti</h1>
  <p>ElegÃ­ cÃ³mo jugar</p>
  <div class="menu">
    <button onclick="startGame('cpu')">ğŸ§  vs MÃ¡quina</button>
    <button onclick="startGame('pvp')">ğŸ‘¥ 2 Personas</button>
  </div>
  <a href="index.html" class="back">â¬…ï¸ Volver</a>
</div>

<div class="card" id="game" style="display:none">
  <h1>ğŸ® Ta Te Ti</h1>
  <div class="status" id="status"></div>
  <div class="board" id="board"></div>
  <button onclick="reset()">ğŸ”„ Reiniciar</button>
</div>

<script>
let board,turn,mode,gameOver=false;

function startGame(m){
  mode=m;
  board=["","","","","","","","",""];
  turn="X";
  gameOver=false;

  menu.style.display="none";
  game.style.display="block";
  render();
}

function render(){
  boardDiv.innerHTML="";
  board.forEach((v,i)=>{
    const c=document.createElement("button");
    c.className="cell";
    c.textContent=v;
    c.onclick=()=>play(i);
    boardDiv.appendChild(c);
  });
  updateStatus();
}

function updateStatus(){
  if(gameOver) return;
  if(mode==="cpu" && turn==="O"){
    status.textContent="ğŸ¤– Juega la mÃ¡quina...";
    setTimeout(cpuMove,600);
  }else{
    status.textContent=`Turno de ${turn}`;
  }
}

function play(i){
  if(board[i]||gameOver) return;
  board[i]=turn;

  if(checkWin()){
    status.textContent=`ğŸ‰ GanÃ³ ${turn}`;
    gameOver=true;
    return;
  }

  if(board.every(c=>c)){
    status.textContent="ğŸ¤ Empate";
    gameOver=true;
    return;
  }

  turn=turn==="X"?"O":"X";
  render();
}

function checkWin(){
  const w=[
    [0,1,2],[3,4,5],[6,7,8],
    [0,3,6],[1,4,7],[2,5,8],
    [0,4,8],[2,4,6]
  ];
  return w.some(l=>l.every(i=>board[i]===turn));
}

// ğŸ¤– MAQUINA (juega bien)
function cpuMove(){
  if(gameOver) return;

  // ganar
  for(let i=0;i<9;i++){
    if(!board[i]){
      board[i]="O";
      if(checkWin()) return endCpu();
      board[i]="";
    }
  }

  // bloquear
  for(let i=0;i<9;i++){
    if(!board[i]){
      board[i]="X";
      if(checkWin()){
        board[i]="O";
        return endCpu();
      }
      board[i]="";
    }
  }

  // centro
  if(!board[4]){board[4]="O";return endCpu();}

  // esquinas
  const corners=[0,2,6,8].filter(i=>!board[i]);
  if(corners.length){
    board[corners[Math.floor(Math.random()*corners.length)]]="O";
    return endCpu();
  }

  // cualquiera
  const free=board.map((v,i)=>v?null:i).filter(v=>v!==null);
  board[free[Math.floor(Math.random()*free.length)]]="O";
  endCpu();
}

function endCpu(){
  if(checkWin()){
    status.textContent="ğŸ¤– GanÃ³ la mÃ¡quina";
    gameOver=true;
    return;
  }
  if(board.every(c=>c)){
    status.textContent="ğŸ¤ Empate";
    gameOver=true;
    return;
  }
  turn="X";
  render();
}

function reset(){
  game.style.display="none";
  menu.style.display="block";
}

const boardDiv=document.getElementById("board");
const status=document.getElementById("status");
const menu=document.getElementById("menu");
const game=document.getElementById("game");
</script>

</body>
</html>
